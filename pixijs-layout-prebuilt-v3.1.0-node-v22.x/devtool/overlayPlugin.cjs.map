{"version":3,"file":"overlayPlugin.cjs","sources":["../../src/devtool/overlayPlugin.ts"],"sourcesContent":["import { Point, Rectangle } from 'pixi.js';\nimport { calculateRegions, type DebugRegions, DebugRegionType } from '../core/debug/calculateDebugRegions';\n\nimport type { OverlayExtension } from '@pixi/devtools';\n\nconst regions: DebugRegions = new Map();\nconst point = new Point();\n\nObject.values(DebugRegionType).forEach((type) => {\n    regions.set(type, {\n        outer: new Rectangle(),\n        inner: new Rectangle(),\n    });\n});\n\nexport const overlayPlugin: OverlayExtension = {\n    extension: {\n        name: 'layout-scene-overlay',\n        type: 'overlay',\n    },\n    getSelectedStyle() {\n        return {\n            backgroundColor: 'rgba(0, 255, 255, 0.5)',\n            border: '2px solid white',\n        };\n    },\n    getHoverStyle() {\n        return {\n            backgroundColor: 'rgba(255, 255, 255, 0.5)',\n            border: '2px solid white',\n        };\n    },\n    getGlobalBounds(node) {\n        if (node.layout) {\n            calculateRegions(node.layout, regions);\n            const region = regions.get(DebugRegionType.Margin)!;\n            const { left, top } = node.layout.computedLayout;\n            const pos = node.layout.target.getGlobalPosition(point);\n\n            return {\n                x: region.outer.x + pos.x + left,\n                y: region.outer.y + pos.y + top,\n                width: region.outer.width,\n                height: region.outer.height,\n            };\n        }\n\n        return node.getBounds();\n    },\n};\n"],"names":["Point","DebugRegionType","Rectangle","calculateRegions"],"mappings":";;;;AAKA,MAAM,8BAA4B,IAAI;AACtC,MAAM,QAAQ,IAAIA,QAAAA,MAAM;AAExB,OAAO,OAAOC,sBAAe,eAAA,EAAE,QAAQ,CAAC,SAAS;AAC7C,UAAQ,IAAI,MAAM;AAAA,IACd,OAAO,IAAIC,QAAAA,UAAU;AAAA,IACrB,OAAO,IAAIA,QAAU,UAAA;AAAA,EAAA,CACxB;AACL,CAAC;AAEM,MAAM,gBAAkC;AAAA,EAC3C,WAAW;AAAA,IACP,MAAM;AAAA,IACN,MAAM;AAAA,EACV;AAAA,EACA,mBAAmB;AACR,WAAA;AAAA,MACH,iBAAiB;AAAA,MACjB,QAAQ;AAAA,IACZ;AAAA,EACJ;AAAA,EACA,gBAAgB;AACL,WAAA;AAAA,MACH,iBAAiB;AAAA,MACjB,QAAQ;AAAA,IACZ;AAAA,EACJ;AAAA,EACA,gBAAgB,MAAM;AAClB,QAAI,KAAK,QAAQ;AACIC,6CAAA,KAAK,QAAQ,OAAO;AACrC,YAAM,SAAS,QAAQ,IAAIF,sBAAAA,gBAAgB,MAAM;AACjD,YAAM,EAAE,MAAM,IAAI,IAAI,KAAK,OAAO;AAClC,YAAM,MAAM,KAAK,OAAO,OAAO,kBAAkB,KAAK;AAE/C,aAAA;AAAA,QACH,GAAG,OAAO,MAAM,IAAI,IAAI,IAAI;AAAA,QAC5B,GAAG,OAAO,MAAM,IAAI,IAAI,IAAI;AAAA,QAC5B,OAAO,OAAO,MAAM;AAAA,QACpB,QAAQ,OAAO,MAAM;AAAA,MACzB;AAAA,IAAA;AAGJ,WAAO,KAAK,UAAU;AAAA,EAAA;AAE9B;;"}